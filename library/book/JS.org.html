<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>JS - my collection</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="AI.org.html"><strong aria-hidden="true">1.</strong> AI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="MachineLearning.org.html"><strong aria-hidden="true">1.1.</strong> MachineLearning</a></li><li class="chapter-item expanded "><a href="DeepLearning.org.html"><strong aria-hidden="true">1.2.</strong> DeepLearning</a></li><li class="chapter-item expanded "><a href="NLP.org.html"><strong aria-hidden="true">1.3.</strong> NLP</a></li></ol></li><li class="chapter-item expanded "><a href="CS.org.html"><strong aria-hidden="true">2.</strong> CS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="linux.org.html"><strong aria-hidden="true">2.1.</strong> Linux</a></li><li class="chapter-item expanded "><a href="Algorithm.org.html"><strong aria-hidden="true">2.2.</strong> Algorithm</a></li><li class="chapter-item expanded "><a href="DataStructure.org.html"><strong aria-hidden="true">2.3.</strong> DataStructure</a></li><li class="chapter-item expanded "><a href="Parallelisum.org.html"><strong aria-hidden="true">2.4.</strong> Parallelisum</a></li><li class="chapter-item expanded "><a href="cloud_service_computing.org.html"><strong aria-hidden="true">2.5.</strong> Cloud_service_computing</a></li><li class="chapter-item expanded "><a href="blockchain.org.html"><strong aria-hidden="true">2.6.</strong> Blockchain</a></li></ol></li><li class="chapter-item expanded "><a href="DataScience.org.html"><strong aria-hidden="true">3.</strong> DataScience</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="DAMA.org.html"><strong aria-hidden="true">3.1.</strong> DAMA</a></li></ol></li><li class="chapter-item expanded "><a href="Math.org.html"><strong aria-hidden="true">4.</strong> Math</a></li><li class="chapter-item expanded "><a href="Physik.org.html"><strong aria-hidden="true">5.</strong> Physik</a></li><li class="chapter-item expanded "><a href="QutuamComputation.org.html"><strong aria-hidden="true">6.</strong> QutuamComputation</a></li><li class="chapter-item expanded "><a href="ROS.org.html"><strong aria-hidden="true">7.</strong> ROS</a></li><li class="chapter-item expanded "><a href="tools.org.html"><strong aria-hidden="true">8.</strong> Tools</a></li><li class="chapter-item expanded "><a href="WebDesign.org.html"><strong aria-hidden="true">9.</strong> WebDesign</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="vue.org.html"><strong aria-hidden="true">9.1.</strong> Vue</a></li><li class="chapter-item expanded "><a href="vscode.org.html"><strong aria-hidden="true">9.2.</strong> Vscode</a></li></ol></li><li class="chapter-item expanded "><a href="Language.org.html"><strong aria-hidden="true">10.</strong> Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="c.org.html"><strong aria-hidden="true">10.1.</strong> C</a></li><li class="chapter-item expanded "><a href="ts.org.html"><strong aria-hidden="true">10.2.</strong> TS</a></li><li class="chapter-item expanded "><a href="scala.org.html"><strong aria-hidden="true">10.3.</strong> Scala</a></li><li class="chapter-item expanded "><a href="lisp.org.html"><strong aria-hidden="true">10.4.</strong> Lisp</a></li><li class="chapter-item expanded "><a href="Java.org.html"><strong aria-hidden="true">10.5.</strong> Java</a></li><li class="chapter-item expanded "><a href="JS.org.html" class="active"><strong aria-hidden="true">10.6.</strong> JS</a></li><li class="chapter-item expanded "><a href="go.org.html"><strong aria-hidden="true">10.7.</strong> Go</a></li><li class="chapter-item expanded "><a href="rust.org.html"><strong aria-hidden="true">10.8.</strong> Rust</a></li><li class="chapter-item expanded "><a href="python.org.html"><strong aria-hidden="true">10.9.</strong> Python</a></li><li class="chapter-item expanded "><a href="emacs.org.html"><strong aria-hidden="true">10.10.</strong> Emacs</a></li><li class="chapter-item expanded "><a href="haskell.org.html"><strong aria-hidden="true">10.11.</strong> Haskell</a></li><li class="chapter-item expanded "><a href="Julia.org.html"><strong aria-hidden="true">10.12.</strong> Julia</a></li><li class="chapter-item expanded "><a href="mysql.org.html"><strong aria-hidden="true">10.13.</strong> Mysql</a></li><li class="chapter-item expanded "><a href="postgressql.org.html"><strong aria-hidden="true">10.14.</strong> Postgressql</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">my collection</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<hr />
<h2 id="title-js"><a class="header" href="#title-js">title: JS</a></h2>
<pre><code class="language-{=org}">#+STARTUP: overview
</code></pre>
<h1 id="array"><a class="header" href="#array">Array</a></h1>
<p>push   unshift   pop   shift</p>
<hr />
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">let arrayy = ["Apple", "Banane", "Orange"]
console.log("push Krisch");
arrayy.push("Krisch")
console.log(arrayy);
console.log("unshift Biren");
arrayy.unshift("Biren")
console.log(arrayy);
console.log("pop");
arrayy.pop();  
console.log(arrayy);
console.log("shift");
arrayy.shift();  
console.log(arrayy);  

</code></pre>
<pre><code class="language-example">push Krisch
[ 'Apple', 'Banane', 'Orange', 'Krisch' ]
unshift Biren
[ 'Biren', 'Apple', 'Banane', 'Orange', 'Krisch' ]
pop
[ 'Biren', 'Apple', 'Banane', 'Orange' ]
shift
[ 'Apple', 'Banane', 'Orange' ]
</code></pre>
<p>methods for Array</p>
<hr />
<h2>pop()
push()
shift()
unshift()
splice(0,1,2)
slice(0,1)
concat()
sort(function(a,b)return(a-b))
reverse()
map(value, index, array)
filter(value, index, array)
reduce(total, value, index, array)
every(value, index, array)
some(value, index, array)
indexOf()
find(value, index, array)</h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot;}">function mymap(value, index, array){
  return value*array[index]
}
let arr = [1,2,3,4,5];
console.log(arr.map(mymap));
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot;}">function myreduce(total, value, index, array){
  return total+value*array[index]
}
let arr = [1,2,3,4,5];
console.log(arr.reduce(myreduce, 10));
</code></pre>
<h1 id="set-array-去重-求交"><a class="header" href="#set-array-去重-求交">set array 去重 求交</a></h1>
<pre><code class="language-{.javascript results=&quot;output&quot;}">let arr = [1,2,3,4,5,6,7,4,5,6];
let arr2 = [2,4,6];
let result = [...new Set(arr)].filter(
  item =&gt; new Set(arr2).has(item)
);
console.log(result);
</code></pre>
<h1 id="class"><a class="header" href="#class">Class</a></h1>
<h2 id="es5"><a class="header" href="#es5">ES5</a></h2>
<p>class mit generate function</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot;}">function Phone(brand, price){
    this.brand = brand;
    this.price = price;
}

Phone.prototype.call = function(){
    console.log("I want to make a phone");
}

let Huawei = new Phone("HuAwei", 5998);

console.log(Huawei)

</code></pre>
<h2 id="es6"><a class="header" href="#es6">ES6</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot;}">class Phone{
    constructor(brand, price){
        this.brand = brand;
        this.price = price;
    }

    call(){
        console.log("I will make a call");
    }
}

let onePlus = new  Phone("1+", 2000);
console.log(onePlus);

</code></pre>
<h1 id="settimeout"><a class="header" href="#settimeout">setTimeout</a></h1>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot;}">
setTimeout(  function(){console.log("1090kjk0")}    , 2000);
setTimeout(  ()=&gt;{console.log("10900")}             , 2000);

setTimeout(  ()=&gt;{      } , 2000);

</code></pre>
<h1 id="no-name-function"><a class="header" href="#no-name-function">no name function</a></h1>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot;}">(()=&gt;{console.log("testtest") })();
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot;}">(function(){console.log("testtest")})()
</code></pre>
<h1 id="构造函数也是类"><a class="header" href="#构造函数也是类">构造函数也是类</a></h1>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">  function Person(name, age){
      this.name = name;
      this.age = age;
      this.sagenhallo = function(){
          console.log("hallo");
      }
    return {a:this.age};
  }

  let xiaoming =  Person("xiaoming", 20);
  console.log(xiaoming);
  console.log(xiaoming.name);
//  xiaoming.sagenhallo();



</code></pre>
<pre><code class="language-example">{ a: 20 }
undefined
</code></pre>
<h1 id="let"><a class="header" href="#let">let</a></h1>
<h2 id="不能重复赋值"><a class="header" href="#不能重复赋值">不能重复赋值</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">let a = 1;
let b = [];
let c = "kdjfie";
console.log(c)
let a = 3;

</code></pre>
<h2 id="有块级作用域"><a class="header" href="#有块级作用域">有块级作用域</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">{
    let girls = "meimei";

    function fnnn(){
        console.log(girls);
    }

    fnnn();
}

console.log(girls);
</code></pre>
<pre><code class="language-example">meimei
</code></pre>
<h2 id="没有变量提升"><a class="header" href="#没有变量提升">没有变量提升</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">console.log(song)
let song = "kaka"

</code></pre>
<h1 id="const"><a class="header" href="#const">const</a></h1>
<h2 id="注意"><a class="header" href="#注意">注意</a></h2>
<p>初始一定要赋值 一般使用大写 不能修改 有块级作用域</p>
<h2 id="对象和复合型的可以修改"><a class="header" href="#对象和复合型的可以修改">对象和复合型的可以修改</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">const name = ["wangba", "wuqing", "tiankong"]
name.push("gousi")
console.log(name)

</code></pre>
<pre><code class="language-example">[ 'wangba', 'wuqing', 'tiankong', 'gousi' ]
</code></pre>
<h2 id="数组和对象可以被解构的赋值"><a class="header" href="#数组和对象可以被解构的赋值">数组和对象可以被解构的赋值</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">const F4 = ["zhangsan", "lisi", "wangwu", "zhaoliu"];
let [f1, f2, f3, f4] = F4
console.log(f2)

</code></pre>
<pre><code class="language-example">lisi
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">const zhao = {
    name: "benshan",
    age:"unkownen",
    xiaoping :function(){
        console.log("I K y");
    }
};
let {name, age, xiaoping} = zhao;
console.log(age);
console.log(xiaoping);
xiaoping();

</code></pre>
<pre><code class="language-example">unkownen
[Function: xiaoping]
I K y
</code></pre>
<h1 id="模板字符串可以换行拼接"><a class="header" href="#模板字符串可以换行拼接">模板字符串可以换行，拼接</a></h1>
<p>´${}´ 可以拼接变量 可以换行</p>
<h1 id="简化对象"><a class="header" href="#简化对象">简化对象</a></h1>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">let name = "sangguigu";
let change = function(){
    console.log("I can make it");
};

const school = {
    name,
    change,
    improve(){
        console.log("We can help you");
    }
};

console.log(school.name);
console.log(school.change);
school.change()
school.improve()

</code></pre>
<pre><code class="language-example">sangguigu
[Function: change]
I can make it
We can help you
</code></pre>
<h1 id="箭头函数"><a class="header" href="#箭头函数">箭头函数</a></h1>
<p>静态的this, 当前作用域的this，call都不能改变 不能构造对象实例化
不能使用arguments</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">let qual = n =&gt; n*n;
let fn = (a,b) =&gt; { return a*b};
console.log(qual(3))
console.log(fn(2,5));
</code></pre>
<pre><code class="language-example">9
10
</code></pre>
<h1 id="rest"><a class="header" href="#rest">rest</a></h1>
<h2 id="es5-1"><a class="header" href="#es5-1">ES5</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function data(){
    console.log(arguments);
}
data("nihao", "niyehao");

</code></pre>
<pre><code class="language-example">[Arguments] { '0': 'nihao', '1': 'niyehao' }
</code></pre>
<h2 id="es6-1"><a class="header" href="#es6-1">ES6</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function data(...args){
    console.log(args);
}
data(1,2,3,4);

</code></pre>
<pre><code class="language-example">[ 1, 2, 3, 4 ]
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function data(a, b, ...args){
    console.log(a);
    console.log(b);
    console.log(args);
}
data(1,2,3,4,5,6);

</code></pre>
<pre><code class="language-example">1
2
[ 3, 4, 5, 6 ]
</code></pre>
<h1 id="扩展运算符"><a class="header" href="#扩展运算符">扩展运算符...</a></h1>
<h2 id="beispiel-将内容转化为数组"><a class="header" href="#beispiel-将内容转化为数组">Beispiel 将内容转化为数组</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">const name = ["wangyi", "wanger","wangsan"];
let putname = function(){
    console.log(arguments);
};
putname(...name);

</code></pre>
<pre><code class="language-example">[Arguments] { '0': 'wangyi', '1': 'wanger', '2': 'wangsan' }
</code></pre>
<h2 id="anwendung"><a class="header" href="#anwendung">Anwendung</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">const kuaizi = ["王太利","肖扬"];
const fenghuang = ["冯坤", "来用"];
console.log(kuaizi.concat(fenghuang));
console.log([...kuaizi, ...fenghuang])

</code></pre>
<pre><code class="language-example">[ '王太利', '肖扬', '冯坤', '来用' ]
[ '王太利', '肖扬', '冯坤', '来用' ]
</code></pre>
<h1 id="symbol"><a class="header" href="#symbol">Symbol</a></h1>
<h2 id="唯一性-不能运算-用for表唯一"><a class="header" href="#唯一性-不能运算-用for表唯一">唯一性, 不能运算, 用for表唯一</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">let s = Symbol();
let ss = Symbol("shanggui");
let sss = Symbol("shanggui");
console.log(ss === sss);

let ss1 = Symbol.for("shanggui");
let sss1 = Symbol.for("shanggui");
console.log(ss1 === sss1);

</code></pre>
<pre><code class="language-example">false
true
</code></pre>
<h2 id="给对象添加属性和方法"><a class="header" href="#给对象添加属性和方法">给对象添加属性和方法</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">let youxi = {
    name:"狼人杀",
    [Symbol("say")]: function(){
        console.log("发言");
    },
    [Symbol("nosay")]: function(){
        console.log("闭眼");
    }
};

console.log(youxi);

let addmethod = {
    up: Symbol(),
    down:Symbol()
};

youxi[addmethod.up] = function(){
    console.log("up");
};

youxi[addmethod.down] = function(){
    console.log("down");
};

console.log(youxi);
</code></pre>
<pre><code class="language-example">{
  name: '狼人杀',
  [Symbol(say)]: [Function: [say]],
  [Symbol(nosay)]: [Function: [nosay]]
}
{
  name: '狼人杀',
  [Symbol(say)]: [Function: [say]],
  [Symbol(nosay)]: [Function: [nosay]],
  [Symbol()]: [Function (anonymous)],
  [Symbol()]: [Function (anonymous)]
}
</code></pre>
<h1 id="迭代器"><a class="header" href="#迭代器">迭代器</a></h1>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">const xiyou = ["唐僧", "孙悟空", "猪八戒", "沙僧"]
for (let v in xiyou){
    console.log(v);
}

for (let v of xiyou){
    console.log(v);
}

</code></pre>
<pre><code class="language-example">0
1
2
3
唐僧
孙悟空
猪八戒
沙僧
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">let cluster = {
    name:"tiankong",
    age: [1,2,3,5,7,9],
    [Symbol.iterator]() {
        let index = 0;
        let _that = this;
        return {
            next: function(){
                if (index &lt; _that.age.length) {
                    const result = {value:_that.age[index], done:false };
                    index++;
                    return result;
                }else{
                    return {value:undefined, done:true};
                }
            }
        };
    }
}

for(let v of cluster){
    console.log(v);
}

</code></pre>
<pre><code class="language-example">1
2
3
5
7
9
</code></pre>
<h1 id="生成器"><a class="header" href="#生成器">生成器</a></h1>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function *gen(){
    console.log("1");
    yield "一";
    console.log("2");
    yield "二";
}

for (let v of gen()){
    console.log(v);
}
let iter = gen();


iter.next();
for (let v of iter){
    console.log(v);
}

</code></pre>
<pre><code class="language-example">1
一
2
二
1
2
二
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function *gen(args){
    console.log(args);   // can only be passed once at first
    console.log("1");
    let mmm = yield "一"; // each step can be passed
    console.log(mmm);
    console.log("2");
    yield "二";
    console.log("3");
    yield "三";

}

let iter = gen("aaa");

iter.next();
iter.next("MMM")
iter.next();

</code></pre>
<pre><code class="language-example">aaa
1
MMM
2
3
</code></pre>
<h1 id="type-vaildation"><a class="header" href="#type-vaildation">type vaildation</a></h1>
<h2 id="basic"><a class="header" href="#basic">basic</a></h2>
<p>tpyeof: the rest <code>=</code>{.verbatim} : null, undefined 开始： let a = null;
说明a后来要被赋值为object 结束： a = null; 释放b的内存</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">var a;
console.log()
console.log(typeof(a))
console.log(typeof a)
console.log(typeof a==="undefined" )
console.log(a===undefined )
</code></pre>
<pre><code class="language-example">
undefined
undefined
true
true
</code></pre>
<h2 id="class-1"><a class="header" href="#class-1">class</a></h2>
<p>instanceof typeof 不能区分数组和函数和对象</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">  var bb = {
    bb1 : [1, "niaho", console.log],
    bb2 : function(){
      console.log("nidf");
    }
  }

console.log(bb instanceof Object);
console.log(bb.bb1 instanceof Array);
console.log(bb.bb1 instanceof Object);
console.log(bb.bb2 instanceof Function);
console.log(bb.bb2 instanceof Object);
console.log( typeof bb.bb1[2] === "function")
bb.bb1[2](4)

</code></pre>
<pre><code class="language-example">true
true
true
true
true
true
4
</code></pre>
<h1 id="multi-assigment"><a class="header" href="#multi-assigment">multi assigment</a></h1>
<p>如果两个变量指向一个引用地址，修改其中一个，修改结果另一个可见
如果一个重新指向（例如某个函数赋值），另一个内容不变</p>
<h1 id="call"><a class="header" href="#call">call</a></h1>
<p>对于obj没有test()方法， 临时调用 test.call(obj) <code>=</code>{.verbatim}
obj.test() test.apply(obj) <code>=</code>{.verbatim} obj.test()</p>
<h1 id="iife-immediately-invoked-function-expression"><a class="header" href="#iife-immediately-invoked-function-expression">IIFE Immediately Invoked Function Expression</a></h1>
<h2 id="beispiel"><a class="header" href="#beispiel">Beispiel</a></h2>
<p>1: 不影响全局命名空间 2：可以暴露</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">(function (){
    let a = 34;
    console.log("kk!!!!");
    console.log(a*34);
})();

</code></pre>
<pre><code class="language-example">kk!!!!
1156
</code></pre>
<h2 id="浏览器端列子"><a class="header" href="#浏览器端列子">浏览器端列子</a></h2>
<p>这里不能执行</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">(
    function(){
        let aa = 1;
        function test(){
            console.log(++aa);
        };
        window.$ = function(){
            return {
                test:test
            };
        };
    }
)();

$().test();



</code></pre>
<h2 id="服务器端列子"><a class="header" href="#服务器端列子">服务器端列子</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">(
    function(window){
        let aa = 1;
        function test(){
            console.log(++aa);
        };
        window.$ = function(){
            return {
                test:test
            };
        };
    }
)(this);

this.$().test();



</code></pre>
<pre><code class="language-example">2
</code></pre>
<h1 id="this"><a class="header" href="#this">this</a></h1>
<p>任何函数本质都是通过对象来调用的， 如果没有指定调用者，那么就是window</p>
<h1 id="括号"><a class="header" href="#括号">括号</a></h1>
<p>小括弧(IIFE)和中括弧(Beispiel untern)前面的语句后必须加分号，
否则分号全部可以省略</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">[1,2,3,4].forEach(function(a){console.log(a)})
;[1,2,3,4].forEach(a =&gt;console.log(a))

</code></pre>
<pre><code class="language-example">1
2
3
4
1
2
3
4
</code></pre>
<h1 id="callback"><a class="header" href="#callback">callback</a></h1>
<h2 id="callback-named-function"><a class="header" href="#callback-named-function">callback named function</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot;}"> var test = function(msg, callback){
     setTimeout(function(){ console.log(msg);   }, 2000);
     //console.log(msg);
     callback(); 
 }
function  justcall(){
     console.log("juskjktcallkkjk to i ");
 }
var just = function(){
     console.log("juskjktcallkkjk to i ");
 }
 test("nisho 0p", justcall)
 test("nisho 0p", just)
</code></pre>
<h2 id="callback-no-named-function"><a class="header" href="#callback-no-named-function">callback no named function</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot;}">  var test = function(msg , didi){
//      setTimeout( ()=&gt;{   console.log(msg);   } , 2000);
      console.log(msg);
      didi(msg);
  }

  test("kdjfi", msg =&gt; {
      console.log(msg);
  });
</code></pre>
<h2 id="no-named-function-callback-no-named-function"><a class="header" href="#no-named-function-callback-no-named-function">no named function callback no named function</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot;}">(
    (msg , didi) =&gt; {
        console.log(msg);
        //          setTimeout(  ()=&gt;{    didi(msg);  } , 2000);  // can only be used in  function body
        didi(msg); 
    }
)
( "kdiikkjkjk",
  msg =&gt; {
      console.log(msg);
  }
)
</code></pre>
<h1 id="promise"><a class="header" href="#promise">promise</a></h1>
<h2 id="resolve-and-reject"><a class="header" href="#resolve-and-reject">resolve and reject</a></h2>
<hr />
<h2>resolve 触发 then 回调
reject 触发 catch 回调</h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">let sentSuccess = false;
let p = new Promise(function(resolve, reject) {
  if(sentSuccess){
    resolve("Successed");
  } else {
    reject("Failed");
  }
});

p.then(function(message) {
  console.log(`${message} is coming`);
}).catch(function(message){
  console.log(`${message} is coming`);
})

</code></pre>
<pre><code class="language-example">Failed is coming
</code></pre>
<h2 id="resolve-and-reject-with-recusive"><a class="header" href="#resolve-and-reject-with-recusive">resolve and reject with recusive</a></h2>
<hr />
<h2>then 执行后正常返回 resolved状态， 出错返回rejected 状态
catch 执行后正常返回 resolved状态， 出错返回rejected 状态</h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">Promise.resolve().then( ()=&gt; {
    console.log(1);
}).catch(()=&gt; {
    console.log(2);
}).then(()=&gt; {
    console.log(3);
});

</code></pre>
<pre><code class="language-example">1
3
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">Promise.resolve().then( ()=&gt; {
    console.log(1);
    throw new Error ('Error');
}).catch(()=&gt; {
    console.log(2);
}).then(()=&gt; {
    console.log(3);
});

</code></pre>
<pre><code class="language-example">1
2
3
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">Promise.resolve().then( ()=&gt; {
    console.log(1);
    throw new Error ('Error');
}).catch(()=&gt; {
    console.log(2);
}).catch(()=&gt; {
    console.log(3);
});

</code></pre>
<pre><code class="language-example">1
2
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">let sentSuccess = true;
let p = new Promise(function(resolve, reject) {
  if(sentSuccess){
    resolve("Successed");
  } else {
    reject("Failed");
  }
});

p.then(function(message) {
  console.log(`${message} is coming`);
  console.log(1);
  throw new Error ('Error');
}).catch(()=&gt; {
  console.log(2);
}).catch(()=&gt; {
  console.log(3);
}).catch(function(message){
  console.log(`${message} is coming`);
}).then(() =&gt; {
  console.log(4);  
});

</code></pre>
<pre><code class="language-example">Successed is coming
1
2
4
</code></pre>
<h2 id="resolve-and-reject-with-recusive-with-return"><a class="header" href="#resolve-and-reject-with-recusive-with-return">resolve and reject with recusive with return</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">  let sentSuccess = false;
  let p = new Promise(function(resolve, reject) {
    if(sentSuccess){
      resolve("Successed");
    } else {
      reject("Failed");
    }
  });

  p.then(function(message) {
    console.log(`${message} is coming`);
    return "niaho";
  }).then(function(massage) {
    console.log(massage)
  }).catch(function(message){
    console.log(`${message} is coming`);
    return "nibuaho";
  }).then(function(massage) {
    console.log(massage)
  })

* Closure
** conuter将函数作为另一个函数的返回值
#+begin_src js :results output :exports both
  function f1(){
      let a = 0;
      function f2(){
          a++;
          console.log(a);
      }
      return f2;
  }

  var f = f1();
  f()
  f()
  f();

</code></pre>
<pre><code class="language-example">1
2
3
</code></pre>
<h2 id="将函数作为实参传给另一个函数调用"><a class="header" href="#将函数作为实参传给另一个函数调用">将函数作为实参传给另一个函数调用</a></h2>
<p>实际上，这和回调函数是一样的</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function print(fn){
    let a = 200;
    fn();
}

let a = 100;
function fn(){
    console.log(a);
}
print(fn);

</code></pre>
<pre><code class="language-example">100
</code></pre>
<h2 id="multi-return"><a class="header" href="#multi-return">multi return</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function myModule(){
    let msg = "My Massage";

    function doSomething(){
        console.log("do Something..."+msg);
    }
    function doOtherthing(){
        console.log("do Otherthing..." + msg);
    }

    return {
        Something:doSomething,
        Otherthing:doOtherthing
    };
}

let F = myModule();
F.Something()
F.Otherthing()

</code></pre>
<pre><code class="language-example">do Something...My Massage
do Otherthing...My Massage
</code></pre>
<h1 id="prototype"><a class="header" href="#prototype">Prototype</a></h1>
<h2 id="new-note"><a class="header" href="#new-note">new note</a></h2>
<p>每一个函数都有一个prototpye属性&amp;，默认是个对象， 即原型对象
该prototype原型对象有constructor属性和_<del>proto</del>_<del>属性</del>
constructor指向函数对象（回去了） fun.prototype = &amp;, &amp;.constructor = fun</p>
<p><strong>constructor</strong></p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function Fun(){  }
var yuanxing = Fun.prototype
var yuanhanshu = yuanxing.constructor
console.log(yuanhanshu == Fun)
console.log(Fun.prototype.constructor == Fun)
</code></pre>
<pre><code class="language-example">true
true
</code></pre>
<p><strong>prototype</strong> <strong>显式原型</strong> <strong>函数类</strong> <strong>定义时被生成</strong>
<strong>添加方法给类的原型对象</strong>
还可以对原型对象添加自定义的属性和方法，让原型对象的函数的实列来使用</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function Fun(){  }
Fun.prototype.test = function(){console.log("prototype for test")}
var fun = new Fun()
fun.test()
</code></pre>
<pre><code class="language-example">prototype for test
</code></pre>
<p><strong>[[proto]{.underline}]{.underline}</strong> <strong>隐式原型</strong> <strong>实列</strong>
<strong>实列化时生成</strong></p>
<p>类的显式原型等于实列的隐式原型</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function Fun(){}
var fun = new Fun()
console.log(Fun.prototype)
console.log(fun.__proto__)
console.log(Fun.prototype == fun.__proto__)
</code></pre>
<pre><code class="language-example">{}
{}
true
</code></pre>
<p><strong>[[proto]{.underline}]{.underline}</strong> 原型链*
如果为被复制，则默认为系统Object空对象</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">    function Fun(){}
    var fun = new Fun()

    function FFun (){}
    var ffun = new FFun()

  FFun.prototype.__proto__ = fun
//  ffun.__proto__.__proto__ = fun

    console.log(ffun.__proto__.__proto__)
</code></pre>
<pre><code class="language-example">Fun {}
</code></pre>
<h2 id="alte-note"><a class="header" href="#alte-note">alte note</a></h2>
<p>对象的隐式原型([[proto]{.underline}]{.underline})等于对应的构造函数的显式原型(prototype)的值
[<em>photolink</em>]{.spurious-link
target="~/Dropbox/subjects/foto/JS_Obj_Fuck_prototype.png"}
对象的属性组成： 1：本身的声明 2：_<del>proto</del>_<del>隐式原型链属性</del>
3：系统Object的原型对象，其_<del>proto</del>__ = null</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function Fn (){
}
var fn = new Fn();

Fn.prototype.test = function(){
    console.log("from prototype");
}

fn.test();  // === fn.__proto__.test();
fn.__proto__.test();

</code></pre>
<pre><code class="language-example">from prototype
from prototype
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">console.log(Object.prototype instanceof Object)
console.log(Function.prototype instanceof Object)
console.log(Function.__proto__ === Function.prototype)
</code></pre>
<pre><code class="language-example">false
true
true
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function A(){};
A.prototype.n = 1;
var b = new A();
A.prototype = {
    n:2,
    m:3
};
var c = new A();
console.log(b.n, b.m, c.n, c.m);
</code></pre>
<pre><code class="language-example">1 undefined 2 3
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function F(){}

Object.prototype.a = function(){
    console.log("a")
}
Function.prototype.b = function(){
    console.log("b")
}
var f = new F();
f.a()
f.b()
F.a()
F.b()


</code></pre>
<h1 id="event-loop事件循环"><a class="header" href="#event-loop事件循环">event loop事件循环</a></h1>
<ul>
<li>browser interpreter</li>
<li>Call stack</li>
<li>Web API</li>
<li>Call query</li>
<li>event loop</li>
</ul>
<h1 id="asyncawait"><a class="header" href="#asyncawait">async/await</a></h1>
<p>::: center
用同步语法编写异步代码
:::</p>
<h2 id="执行async函数-返回的是promise"><a class="header" href="#执行async函数-返回的是promise">执行async函数， 返回的是Promise</a></h2>
<p>如果没有Promise的调用，也会自动封装为Promise</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">async function fn1(){
    return 1000;
}
fn1().then(data =&gt; {
    console.log("data :", data);
});
</code></pre>
<pre><code class="language-example">data : 1000
</code></pre>
<p>如果有，则直接返回该Promise</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">async function fn1(){
    return Promise.resolve(200);
}
const res1 = fn1();
res1.then(data =&gt; {
    console.log("data :", data);
});
</code></pre>
<pre><code class="language-example">data : 200
</code></pre>
<h2 id="await-相当于-promise--then"><a class="header" href="#await-相当于-promise--then">await 相当于 Promise + then</a></h2>
<h3 id="await-后面跟数值也会自动封装"><a class="header" href="#await-后面跟数值也会自动封装">await 后面跟数值也会自动封装</a></h3>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">(async function (){
    const data = await 300;
    console.log(data);
})();
</code></pre>
<pre><code class="language-example">300
</code></pre>
<h3 id="await-跟promise"><a class="header" href="#await-跟promise">await 跟Promise</a></h3>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">(async function (){
    const p1 = Promise.resolve(200);
    const data = await p1;
    console.log(data);
} )();
</code></pre>
<pre><code class="language-example">200
</code></pre>
<h3 id="await跟async函数"><a class="header" href="#await跟async函数">await跟async函数</a></h3>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">async function fn1(){
    return 300;
}

(async function (){
    const data = await fn1();
    console.log(data);  // 此时await后面的命令相当与setTimeout的第二个参数，即新的异步分支
} )();
</code></pre>
<pre><code class="language-example">300
</code></pre>
<h2 id="try-catch-捕获异常代替promisecatch"><a class="header" href="#try-catch-捕获异常代替promisecatch">try catch 捕获异常,代替Promise+catch</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">(async function (){
    const p4 = Promise.reject('Error');
    try {
        const res = await p4;
        console.log(res); // reject for Promise + then, this will not be executed
    } catch (err) {
        console.log(err);
    } finally {
        console.log("It's done");
    }
})();
</code></pre>
<pre><code class="language-example">Error
It's done
</code></pre>
<h2 id="包装长时耗的异步函数"><a class="header" href="#包装长时耗的异步函数">包装长时耗的异步函数</a></h2>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function sendRequest(){
  return new Promise(function(resolve, reject) {
    setTimeout( function(){
      reject("Request reject");
    }, 2000);
  });
}

async function getUsername() {
  try {
    let username =  await sendRequest();
    console.log(username);
  } catch (err) {
    console.log(`Error: ${err}`);
  } finally {
    console.log("Gut");
  }
}

getUsername()

</code></pre>
<pre><code class="language-example">Error: Request reject
Gut
</code></pre>
<h1 id="js-in-dom"><a class="header" href="#js-in-dom">js in Dom</a></h1>
<pre><code class="language-html">&lt;li&gt;&lt;a onclick="emacs()" href="#"&gt;Emacs&lt;/a&gt;&lt;/li&gt;
&lt;iframe src="emacs.html" id="emacs" class="hidden" ; style="position:fixed; top:50px; left:0; bottom:0; right:0; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden; z-index:999999;" &gt;&lt;/iframe&gt;
</code></pre>
<pre><code class="language-{.javascript org-language=&quot;js&quot;}">document.querySelectorAll('iframe').forEach( item =&gt; item.setAttribute('class','hidden'))
document.getElementById("UniversalHashing").setAttribute('class','showing')
</code></pre>
<h1 id="rests"><a class="header" href="#rests">...rests</a></h1>
<p>使用在一个表达式前，表示整个表达式的值， 例如整个数组或者对象</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">var test = {a:0, b:1, c:2}
var testall = {...test, d:5}
console.log(testall)

var parts = ['0', '1','2']
var alles = [...parts, '3']
console.log(alles)


</code></pre>
<pre><code class="language-example">{ a: 0, b: 1, c: 2, d: 5 }
[ '0', '1', '2', '3' ]
</code></pre>
<h1 id="add-function-to-window"><a class="header" href="#add-function-to-window">add function to window</a></h1>
<p>with $ this example is special for now, virtual DOM</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">( function(window){
    let aa = 9;
    function test(){
        console.log(++aa);
    };
    window.$ = function(){
        return {
            test:test,
            aa:aa
        };
    };
}
)(this);

console.log(this);
console.log(this.$);
console.log(this.$());
console.log(this.$().aa);
this.$().test();
</code></pre>
<pre><code class="language-example">{ '$': [Function (anonymous)] }
[Function (anonymous)]
{ test: [Function: test], aa: 9 }
9
10
</code></pre>
<h1 id="change-this-with-call-apply-bind"><a class="header" href="#change-this-with-call-apply-bind">change this with call apply bind</a></h1>
<h2 id="call-function"><a class="header" href="#call-function">call function</a></h2>
<p>改变函数运行的this值，即指向, 并得到运行后的结果,
通过增加方法并事后删除的方式完成 let the <strong>this</strong> attribution of call
function be banded with another instance, and calculate the result.</p>
<p>if the another instance is null or undefined, in ES11, globalThis will
replace this instance with window</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">  function call(Fn, obj, ...args){
      if (obj == undefined || obj == null) {
          obj = globalThis;
      }
      obj.temp = Fn;
      var resulte = obj.temp(...args);
      delete  obj.temp;
      return resulte;
  }

  function add(a, b){
      console.log(this);
      return a+b+this.c;
  }
  let obj ={
      c:2
  };

  console.log(call(add, obj, 10, 10));
//将add的this值等于obj的this

  //  window.c = 10;
globalThis.c = 2;
console.log(call(add, null, 10, 10));

</code></pre>
<pre><code class="language-example">{ c: 2, temp: [Function: add] }
22
&lt;ref *1&gt; Object [global] {
  global: [Circular *1],
  clearInterval: [Function: clearInterval],
  clearTimeout: [Function: clearTimeout],
  setInterval: [Function: setInterval],
  setTimeout: [Function: setTimeout] {
    [Symbol(nodejs.util.promisify.custom)]: [Function (anonymous)]
  },
  queueMicrotask: [Function: queueMicrotask],
  clearImmediate: [Function: clearImmediate],
  setImmediate: [Function: setImmediate] {
    [Symbol(nodejs.util.promisify.custom)]: [Function (anonymous)]
  },
  a: 3,
  c: 2,
  temp: [Function: add]
}
22
</code></pre>
<h2 id="apply-function"><a class="header" href="#apply-function">apply function</a></h2>
<p>唯一和call不同是: apply的第三个开始的数据参数是一个整体，比如数组</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">  function apply(Fn, obj, args){
      if (obj == undefined || obj == null) {
          obj = globalThis;
      }
      obj.temp = Fn;
      var resulte = obj.temp( ...args);
      delete  obj.temp;
      return resulte;
  }
  function add(a, b){
      console.log(this);
      return a+b+this.c;
  }
  let obj ={
      c:2
  };
  global.a = 3;
  console.log(apply(add, obj, [2,4]));
//将add的this值等于obj的this
  //  window.c = 10;
globalThis.c = 2;
console.log(apply(add, null, [2, 4]));
</code></pre>
<pre><code class="language-example">{ c: 2, temp: [Function: add] }
8
&lt;ref *1&gt; Object [global] {
  global: [Circular *1],
  clearInterval: [Function: clearInterval],
  clearTimeout: [Function: clearTimeout],
  setInterval: [Function: setInterval],
  setTimeout: [Function: setTimeout] {
    [Symbol(nodejs.util.promisify.custom)]: [Function (anonymous)]
  },
  queueMicrotask: [Function: queueMicrotask],
  clearImmediate: [Function: clearImmediate],
  setImmediate: [Function: setImmediate] {
    [Symbol(nodejs.util.promisify.custom)]: [Function (anonymous)]
  },
  a: 3,
  c: 2,
  temp: [Function: add]
}
8
</code></pre>
<h2 id="bind-function"><a class="header" href="#bind-function">bind function</a></h2>
<p>do the same thing as call, but do not execute, return a function which
can be executed. <strong>注意传值</strong></p>
<pre><code class="language-{.javascript org-language=&quot;js&quot; results=&quot;output&quot; exports=&quot;both&quot;}">function call(Fn, obj, ...args){
    if (obj == undefined || obj == null) {
        obj = globalThis;
    }
    obj.temp = Fn;
    var resulte = obj.temp(...args);
    delete obj.temp;
    return resulte;
};

function bind(Fn, obj, ...args){
    return function(...arg){
        return call(Fn, obj, ...args, ...arg);
    };

}

globalThis.c = 2;
let obj = {c:2};

function add(a, b){
    return a+b+this.c;
}
let fff =bind(add, obj, 2);
console.log(fff(1));

</code></pre>
<pre><code class="language-example">5
</code></pre>
<h1 id="jest"><a class="header" href="#jest">Jest</a></h1>
<h2 id="init"><a class="header" href="#init">init</a></h2>
<ul>
<li>init</li>
</ul>
<p>npx jest --init npx jest --coverage / npm run coverage</p>
<ul>
<li>autodetect</li>
</ul>
<p>packages.json-&gt;"scripts": "test":"jest", ----&gt;&gt;&gt;&gt;
"test":"jest --watchall",</p>
<ul>
<li>babel</li>
</ul>
<p>npm install @bable/core@7.4.5 @bable/preset-env@7.4.5 -D touch
.babelrc</p>
<ul>
<li>model</li>
</ul>
<p>a model o model f model p model</p>
<h2 id="runing-node-npm-js-fetch-async-await"><a class="header" href="#runing-node-npm-js-fetch-async-await">runing node npm js fetch async await</a></h2>
<ul>
<li>
<p>npm init</p>
</li>
<li>
<p>"type": "module", &gt;&gt; package.json</p>
</li>
<li>
<p>npm install node-fetch</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot;}">import fetch from 'node-fetch';

fetch("https://pokeapi.co/api/v2/pokemon/")
  .then((res) =&gt; res.json())
  .then((data) =&gt; console.log(data)); 
</code></pre>
</li>
<li>
<p>node index.js</p>
</li>
</ul>
<h2 id="jest-test-npm-js-fetch-async-await"><a class="header" href="#jest-test-npm-js-fetch-async-await">jest test npm js fetch async await</a></h2>
<ul>
<li>
<p>npm init -y</p>
</li>
<li>
<p>"type": "module", &gt;&gt; package.json</p>
</li>
<li>
<p>npm install node-fetch</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot;}">import fetch from 'node-fetch';

const getPokemonList = async() =&gt; {
  const listRep = await fetch("https://pokeapi.co/api/v2/pokemon/");
  return await listRep.json();
};

const getPokemon = async(url) =&gt; {
  const dataResp = await fetch(url);
  return await dataResp.json();
};



function sum(a, b) {
  return a + b;
}
module.exports = {
  sum,
  getPokemon,
  getPokemonList
};
</code></pre>
</li>
<li>
<p>Here, because jest are default use CommonJS, so please PLEASE revoke
your node-fetch to version 2. Because node-fetch after version 3, it
will be convert to ES6.</p>
</li>
<li>
<p>npm remove node-fetch</p>
</li>
<li>
<p>npm install node-fetch@2.6.2</p>
<pre><code class="language-{.javascript org-language=&quot;js&quot;}">const {sum, getPokemon, getPokemonList } = require('./index');

test("testSum", () =&gt; {
  expect( sum(1, 2) ).toBe(3);
});

test("testDict", () =&gt; {
  const data = {one: 1};
  data["two"] = 2;
  expect( data ).toEqual({one:1, two:2});
});


test("testgetPokemonList", async () =&gt; {
  const pokemonList = await getPokemonList();
  const firstPokemon = await getPokemon(pokemonList.results[0].url);
  expect(firstPokemon.name).toBe("bulbasaur");
});


</code></pre>
</li>
<li>
<p>but the index.js is using ES6 to import fetch-node, even use
module.exports(for CommonJS) and require, but import is still
complaining.</p>
</li>
<li>
<p>npm i -s @bable/preset-env</p>
</li>
<li>
<p>npm i -s babel-jest</p>
</li>
<li>
<p>touch .babelrc</p>
<pre><code>{
  "presets": ["@babel/preset-env"]
}
</code></pre>
</li>
<li>
<p>npm run test should now work</p>
</li>
</ul>
<h2 id="yarn-ts-fetch-async-await"><a class="header" href="#yarn-ts-fetch-async-await">yarn ts fetch async await</a></h2>
<ul>
<li>
<p>cd asyncts</p>
</li>
<li>
<p>yarn init -y</p>
</li>
<li>
<p>yarn add typescript ts-node @types/node-fetch@2.6.2</p>
</li>
<li>
<p>yarn add node-fetch@2.6.2</p>
</li>
<li>
<p>npx tsc --init</p>
<pre><code class="language-typescript">import fetch from "node-fetch"
fetch("https://pokeapi.co/api/v2/pokemon/")
  .then((res) =&gt; res.json())
  .then((data) =&gt; console.log(data)); 

</code></pre>
</li>
<li>
<p>ts-node index.ts</p>
<p><strong>node-fetch convert every thing into EMS moduld after version 3.0</strong>
if you meet some error, please use the last version 2</p>
</li>
<li>
<p>yarn add @supercharge/promise-pool</p>
</li>
<li>
<p>yarn add ts-jest jest @types/jest -D</p>
</li>
<li>
<p>npx ts-jest config:init</p>
</li>
<li>
<p>yarn test</p>
</li>
<li>
<p>seeing the demo ~/Dropbox/cs/asyncTSPromisejest</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="Java.org.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="go.org.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="Java.org.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="go.org.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
